modules:
  # Packages
  - type: dnf
    repos:
      keys:
        - https://packages.microsoft.com/keys/microsoft.asc
      files:
        - https://github.com/terrapkg/subatomic-repos/raw/main/terra.repo
      copr:
        - jdxcode/mise
        - dejan/lazygit
        - lihaohong/yazi
        - rivenirvana/lazydocker
        - sneexy/zen-browser
      nonfree: rpmfusion
      cleanup: true
    optfix:
        - zen
    install:
      packages:
        # System
        - terra-release
        - flatpak
        - dnf-plugins-core

        # CLI
        - fish
        - bat
        - starship
        - fastfetch
        - docker
        - docker-compose
        - helix
        - chezmoi
        - zoxide
        - fzf
        - mise
        - lazygit
        - yazi
        - ripgrep
        - fd-find
        - jq
        - resvg
        - eza
        - btop
        - lazydocker
        - zellij
        - darkman

        ## GUI
        - mpv
        - code
        - persepolis
        - zed
        - zen-browser
    remove:
      packages:
        - fedora-third-party
        - fedora-flathub-remote
        - fedora-workstation-repositories
        - firefox
      auto-remove: true

  # Media Codec
  - type: dnf
    repos:
      nonfree: rpmfusion
      cleanup: true
    replace:
      - from-repo: rpmfusion-free
        allow-erasing: true
        packages:
          - old: ffmpeg-free
            new: ffmpeg
