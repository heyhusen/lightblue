modules:
  - type: script
    snippets:
      - "dnf install -y --nogpgcheck --repofrompath 'terra,https://repos.fyralabs.com/terra$releasever' terra-release"
      
  # Packages
  - type: dnf
    repos:
      keys:
        - https://packages.microsoft.com/keys/microsoft.asc
        - https://yum.tableplus.com/apt.tableplus.com.gpg.key
      files:
        - https://yum.tableplus.com/rpm/x86_64/tableplus.repo
      copr:
        - dejan/lazygit
        - lihaohong/yazi
        - rivenirvana/lazydocker
        - sneexy/zen-browser
      nonfree: rpmfusion
      cleanup: true
    optfix:
        - zen
        - tableplus
    install:
      packages:
        # System
        - flatpak
        - dnf-plugins-core
        - wireguard-tools

        # CLI
        - fish
        - bat
        - starship
        - fastfetch
        - docker
        - docker-compose
        - helix
        - chezmoi
        - zoxide
        - fzf
        - mise
        - lazygit
        - yazi
        - ripgrep
        - fd-find
        - jq
        - resvg
        - eza
        - btop
        - lazydocker
        - zellij
        - darkman

        ## GUI
        - mpv
        - code
        - persepolis
        - zed
        - zen-browser
        - tableplus
    remove:
      packages:
        - fedora-third-party
        - fedora-flathub-remote
        - fedora-workstation-repositories
      auto-remove: true

  # Media Codec
  - type: dnf
    repos:
      nonfree: rpmfusion
      cleanup: true
    replace:
      - from-repo: rpmfusion-free
        allow-erasing: true
        packages:
          - old: ffmpeg-free
            new: ffmpeg
  # Desktop Entry
  - type: files
    files:
      - source: system/usr/share/applications
        destination: /usr/share/applications
